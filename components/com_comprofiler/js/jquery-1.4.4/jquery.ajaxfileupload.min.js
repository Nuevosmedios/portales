jQuery.extend({createUploadIframe:function(a,c){var b="jUploadFrame"+a,d;if(window.ActiveXObject){d=document.createElement('<iframe id="'+b+'" name="'+b+'" />');if(typeof c=="boolean")d.src="javascript:false";else if(typeof c=="string")d.src=c}else{d=document.createElement("iframe");d.id=b;d.name=b}d.style.position="absolute";d.style.top="-1000px";d.style.left="-1000px";document.body.appendChild(d);return d},createUploadForm:function(a,c){var b="jUploadForm"+a,d="jUploadFile"+a;b=$('<form  action="" method="POST" name="'+
b+'" id="'+b+'" enctype="multipart/form-data"></form>');var g=$("#"+c),e=$(g).clone();$(g).attr("id",d);$(g).before(e);$(g).appendTo(b);$(b).css("position","absolute");$(b).css("top","-1200px");$(b).css("left","-1200px");$(b).appendTo("body");return b},ajaxFileUpload:function(a){a=jQuery.extend({},jQuery.ajaxSettings,a);var c=(new Date).getTime(),b=jQuery.createUploadForm(c,a.fileElementId);jQuery.createUploadIframe(c,a.secureuri);var d="jUploadFrame"+c;c="jUploadForm"+c;a.global&&!jQuery.active++&&
jQuery.event.trigger("ajaxStart");var g=false,e={};a.global&&jQuery.event.trigger("ajaxSend",[e,a]);var j=function(k){var f=document.getElementById(d);try{if(f.contentWindow){e.responseText=f.contentWindow.document.body?f.contentWindow.document.body.innerHTML:null;e.responseXML=f.contentWindow.document.XMLDocument?f.contentWindow.document.XMLDocument:f.contentWindow.document}else if(f.contentDocument){e.responseText=f.contentDocument.document.body?f.contentDocument.document.body.innerHTML:null;e.responseXML=
f.contentDocument.document.XMLDocument?f.contentDocument.document.XMLDocument:f.contentDocument.document}}catch(l){jQuery.handleError(a,e,null,l)}if(e||k=="timeout"){g=true;var h;try{h=k!="timeout"?"success":"error";if(h!="error"){var m=jQuery.uploadHttpData(e,a.dataType);a.success&&a.success(m,h);a.global&&jQuery.event.trigger("ajaxSuccess",[e,a])}else jQuery.handleError(a,e,h)}catch(n){h="error";jQuery.handleError(a,e,h,n)}a.global&&jQuery.event.trigger("ajaxComplete",[e,a]);a.global&&!--jQuery.active&&
jQuery.event.trigger("ajaxStop");a.complete&&a.complete(e,h);jQuery(f).unbind();setTimeout(function(){try{$(f).remove();$(b).remove()}catch(o){jQuery.handleError(a,e,null,o)}},100);e=null}};a.timeout>0&&setTimeout(function(){g||j("timeout")},a.timeout);try{var i=$("#"+c);$(i).attr("action",a.url);$(i).attr("method","POST");$(i).attr("target",d);if(i.encoding)i.encoding="multipart/form-data";else i.enctype="multipart/form-data";$(i).submit()}catch(p){jQuery.handleError(a,e,null,p)}window.attachEvent?
document.getElementById(d).attachEvent("onload",j):document.getElementById(d).addEventListener("load",j,false);return{abort:function(){}}},uploadHttpData:function(a,c){var b=!c;b=c=="xml"||b?a.responseXML:a.responseText;c=="script"&&jQuery.globalEval(b);c=="json"&&eval("data = "+b);c=="html"&&jQuery("<div>").html(b).evalScripts();return b}});
