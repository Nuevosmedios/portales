(function(d){d.cluetip={version:"1.0.6"};var e,g,K,C,D,E,v,F;d.fn.cluetip=function(h,Y){if(typeof h=="object"){Y=h;h=null}if(h=="destroy")return this.removeData("thisInfo").unbind(".cluetip");return this.each(function(ga){function ha(){return false}var j=this,c=d(this),a=d.extend(true,{},d.fn.cluetip.defaults,Y||{},d.metadata?c.metadata():d.meta?c.data():{}),L=false,U=+a.cluezIndex;c.data("thisInfo",{title:j.title,zIndex:U});var y=false,Z=0;if(!d("#cluetip").length){d('<div id="cluetip"><div id="cluetip-outer"><h3 id="cluetip-title"></h3><div id="cluetip-inner"></div></div><div id="cluetip-extra"></div><div id="cluetip-arrows" class="cluetip-arrows"></div></div>')[$](aa).hide();
e=d("#cluetip").css({position:"absolute"});K=d("#cluetip-outer").css({position:"relative",zIndex:U});g=d("#cluetip-inner");C=d("#cluetip-title");D=d("#cluetip-arrows");E=d('<div id="cluetip-waitimage"></div>').css({position:"absolute"}).insertBefore(e).hide()}var ba=a.dropShadow?+a.dropShadowSteps:0;if(!v){v=d([]);for(var M=0;M<ba;M++)v=v.add(d("<div></div>").css({zIndex:U-1,opacity:0.1,top:1+M,left:1+M}));v.css({position:"absolute",backgroundColor:"#000"}).prependTo(e)}var m=c.attr(a.attribute),
N=a.cluetipClass;if(!m&&!a.splitTitle&&!h)return true;if(a.local&&a.localPrefix)m=a.localPrefix+m;a.local&&a.hideLocal&&d(m+":first").hide();var o=parseInt(a.topOffset,10),s=parseInt(a.leftOffset,10),t,V,O=isNaN(parseInt(a.height,10))?"auto":/\D/g.test(a.height)?a.height:a.height+"px",P,p,q,z,Q,W=parseInt(a.width,10)||275,k=W+(parseInt(e.css("paddingLeft"),10)||0)+(parseInt(e.css("paddingRight"),10)||0)+ba,w=this.offsetWidth,r,i,l,A,B,n=a.attribute!="title"?c.attr(a.titleAttribute):"";if(a.splitTitle){if(n==
undefined)n="";B=n.split(a.splitTitle);n=B.shift()}if(a.escapeTitle)n=n.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;");var S=function(b){if(!a.onActivate(c))return false;y=true;e.removeClass().css({width:W});m==c.attr("href")&&c.css("cursor",a.cursor);a.hoverClass&&c.addClass(a.hoverClass);p=c.offset().top;r=c.offset().left;w=c.innerWidth();if(b.type==focus){l=r+w/2+s;e.css({left:i});z=p+o}else{l=b.pageX;z=b.pageY}if(j.tagName.toLowerCase()!="area"){P=d(document).scrollTop();A=d(window).width()}if(a.positionBy==
"fixed"){i=w+r+s;e.css({left:i})}else{i=w>r&&r>k||r+w+k+s>A?r-k-s:w+r+s;if(j.tagName.toLowerCase()=="area"||a.positionBy=="mouse"||w+k>A)if(l+20+k>A){e.addClass(" cluetip-"+N);i=l-k-s>=0?l-k-s-parseInt(e.css("marginLeft"),10)+parseInt(g.css("marginRight"),10):l-k/2}else i=l+s;var f=i<0?b.pageY+o:b.pageY;e.css({left:i>0&&a.positionBy!="bottomTop"?i:l+k/2>A?A/2-k/2:Math.max(l-k/2,0),zIndex:c.data("thisInfo").zIndex});D.css({zIndex:c.data("thisInfo").zIndex+1})}V=d(window).height();if(h){if(typeof h==
"function")h=h.call(j);g.html(h);x(f)}else if(B){b=B.length;g.html(b?B[0]:"");if(b>1)for(var G=1;G<b;G++)g.append('<div class="split-body">'+B[G]+"</div>");x(f)}else if(!a.local&&m.indexOf("#")!==0)if(/\.(jpe?g|tiff?|gif|png)$/i.test(m)){g.html('<img src="'+m+'" alt="'+n+'" />');x(f)}else if(L&&a.ajaxCache){g.html(L);x(f)}else{var H=a.ajaxSettings.beforeSend,ca=a.ajaxSettings.error,da=a.ajaxSettings.success,ea=a.ajaxSettings.complete;b=d.extend(true,{},a.ajaxSettings,{cache:false,url:m,beforeSend:function(u){H&&
H.call(j,u,e,g);K.children().empty();a.waitImage&&E.css({top:z+20,left:l+20,zIndex:c.data("thisInfo").zIndex-1}).show()},error:function(u,I){if(y)ca?ca.call(j,u,I,e,g):g.html("<i>sorry, the contents could not be loaded</i>")},success:function(u,I){L=a.ajaxProcess.call(j,u);if(y){da&&da.call(j,u,I,e,g);g.html(L)}},complete:function(u,I){ea&&ea.call(j,u,I,e,g);var R=g[0].getElementsByTagName("img");F=R.length;for(var X=0,ia=R.length;X<ia;X++)R[X].complete&&F--;if(F&&!d.browser.opera)d(R).bind("load error",
function(){F--;if(F<1){E.hide();y&&x(f)}});else{E.hide();y&&x(f)}}});d.ajax(b)}else if(a.local){b=d(m+(/#\S+$/.test(m)?"":":eq("+ga+")")).clone(true).show();g.html(b);x(f)}},x=function(b){e.addClass("cluetip-"+N);if(a.truncate){var f=g.text().slice(0,a.truncate)+"...";g.html(f)}n?C.show().html(n):a.showTitle?C.show().html("&nbsp;"):C.hide();if(a.sticky){f=d('<div id="cluetip-close"><a href="#">'+a.closeText+"</a></div>");a.closePosition=="bottom"?f.appendTo(g):a.closePosition=="title"?f.prependTo(C):
f.prependTo(g);f.bind("click.cluetip",function(){J();return false});a.mouseOutClose?e.bind("mouseleave.cluetip",function(){J()}):e.unbind("mouseleave.cluetip")}f="";K.css({zIndex:c.data("thisInfo").zIndex,overflow:O=="auto"?"visible":"auto",height:O});t=O=="auto"?Math.max(e.outerHeight(),e.height()):parseInt(O,10);q=p;Q=P+V;if(a.positionBy=="fixed")q=p-a.dropShadowSteps+o;else if(i<l&&Math.max(i,0)+k>l||a.positionBy=="bottomTop")if(p+t+o>Q&&z-P>t+o){q=z-t-o;f="top"}else{q=z+o;f="bottom"}else q=p+
t+o>Q?t>=V?P:Q-t-o:c.css("display")=="block"||j.tagName.toLowerCase()=="area"||a.positionBy=="mouse"?b-o:p-a.dropShadowSteps;if(f=="")i<r?f="left":f="right";e.css({top:q+"px"}).removeClass().addClass("clue-"+f+"-"+N).addClass(" cluetip-"+N);if(a.arrows){b=p-q-a.dropShadowSteps;D.css({top:/(left|right)/.test(f)&&i>=0&&b>0?b+"px":/(left|right)/.test(f)?0:""}).show()}else D.hide();v.hide();e.hide()[a.fx.open](a.fx.openSpeed||0);a.dropShadow&&v.css({height:t,width:W,zIndex:c.data("thisInfo").zIndex-1}).show();
d.fn.bgiframe&&e.bgiframe();if(a.delayedClose>0)Z=setTimeout(J,a.delayedClose);a.onShow.call(j,e,g)},T=function(){y=false;E.hide();if(!a.sticky||/click|toggle/.test(a.activation)){J();clearTimeout(Z)}a.hoverClass&&c.removeClass(a.hoverClass)},J=function(){K.parent().hide().removeClass();a.onHide.call(j,e,g);c.removeClass("cluetip-clicked");n&&c.attr(a.titleAttribute,n);c.css("cursor","");a.arrows&&D.css({top:""})};d(document).bind("hideCluetip",function(){J()});if(/click|toggle/.test(a.activation))c.bind("click.cluetip",
function(b){if(e.is(":hidden")||!c.is(".cluetip-clicked")){S(b);d(".cluetip-clicked").removeClass("cluetip-clicked");c.addClass("cluetip-clicked")}else T(b);this.blur();return false});else if(a.activation=="focus"){c.bind("focus.cluetip",function(b){S(b)});c.bind("blur.cluetip",function(b){T(b)})}else{c[a.clickThrough?"unbind":"bind"]("click",ha);var fa=function(b){if(a.tracking==true){var f=i-b.pageX,G=q?q-b.pageY:p-b.pageY;c.bind("mousemove.cluetip",function(H){e.css({left:H.pageX+f,top:H.pageY+
G})})}};d.fn.hoverIntent&&a.hoverIntent?c.hoverIntent({sensitivity:a.hoverIntent.sensitivity,interval:a.hoverIntent.interval,over:function(b){S(b);fa(b)},timeout:a.hoverIntent.timeout,out:function(b){T(b);c.unbind("mousemove.cluetip")}}):c.bind("mouseenter.cluetip",function(b){S(b);fa(b)}).bind("mouseleave.cluetip",function(b){T(b);c.unbind("mousemove.cluetip")});c.bind("mouseover.cluetip",function(){c.attr("title","")}).bind("mouseleave.cluetip",function(){c.attr("title",c.data("thisInfo").title)})}})};
d.fn.cluetip.defaults={width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,local:false,localPrefix:null,hideLocal:true,attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:false,showTitle:true,cluetipClass:"default",hoverClass:"",waitImage:true,cursor:"help",arrows:false,dropShadow:true,dropShadowSteps:6,sticky:false,mouseOutClose:false,activation:"hover",clickThrough:false,tracking:false,delayedClose:0,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",
openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(){return true},onShow:function(){},onHide:function(){},ajaxCache:true,ajaxProcess:function(h){return h=h.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:false};var $="appendTo",aa="body";d.cluetip.setup=function(h){if(h&&h.insertionType&&h.insertionType.match(/appendTo|prependTo|insertBefore|insertAfter/))$=h.insertionType;if(h&&
h.insertionElement)aa=h.insertionElement}})(jQuery);
