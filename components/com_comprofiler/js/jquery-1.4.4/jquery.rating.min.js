window.jQuery&&function(a){a.rating={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16,groups:{},event:{fill:function(e,d,b,c){this.drain(e);a(d).prevAll(".star_group_"+e).andSelf().addClass("star_"+(c||"hover"));d=a(d).children("a");val=d.text();b.focus&&b.focus.apply(a.rating.groups[e].valueElem[0],[val,d[0]])},drain:function(e){a.rating.groups[e].valueElem.siblings(".star_group_"+e).removeClass("star_on").removeClass("star_hover")},reset:function(e,d,b){a(a.rating.groups[e].current).is(".cancel")||
a(a.rating.groups[e].current).prevAll(".star_group_"+e).andSelf().addClass("star_on");d=a(d).children("a");val=d.text();b.blur&&b.blur.apply(a.rating.groups[e].valueElem[0],[val,d[0]])},click:function(e,d,b){a.rating.groups[e].current=d;var c=a(d).children("a");val=c.text();a.rating.groups[e].valueElem.val(val);a.rating.event.drain(e,d,b);a.rating.event.reset(e,d,b);b.callback&&b.callback.apply(a.rating.groups[e].valueElem[0],[val,c[0]])}}};a.fn.rating=function(e){if(this.length==0)return this;e=
a.extend({},a.rating,e||{});this.each(function(d){var b=a.extend({},e||{},(a.metadata?a(this).metadata():a.meta?a(this).data():null)||{}),c=a(this).parents("form").attr("name")+"___"+this.id+"_"+this.name;a.rating.groups[c]||(a.rating.groups[c]={count:0});d=a.rating.groups[c].count;a.rating.groups[c].count++;a.rating.groups[c].readOnly=a.rating.groups[c].readOnly||b.readOnly||a(this).attr("disabled");if(d==0){a.rating.groups[c].valueElem=a('<input type="hidden" name="'+this.name+'" value=""'+(b.readOnly?
' disabled="disabled"':"")+"/>");a(this).before(a.rating.groups[c].valueElem);a.rating.groups[c].readOnly||b.required||a(this).before(a('<div class="cancel"><a title="'+b.cancel+'">'+b.cancelValue+"</a></div>").mouseover(function(){a.rating.event.drain(c,this,b);a(this).addClass("star_on")}).mouseout(function(){a.rating.event.reset(c,this,b);a(this).removeClass("star_on")}).click(function(){a.rating.event.click(c,this,b)}))}eStar=a('<div class="star"><a title="'+(this.title||this.value)+'">'+this.value+
"</a></div>");a(this).after(eStar);if(b.half)b.split=2;if(typeof b.split=="number"&&b.split>0){var f=(a.fn.width?a(eStar).width():0)||b.starWidth,g=d%b.split;f=Math.floor(f/b.split);a(eStar).width(f).find("a").css({"margin-left":"-"+g*f+"px"})}a(eStar).addClass("star_group_"+c);a.rating.groups[c].readOnly?a(eStar).addClass("star_readonly"):a(eStar).addClass("star_live").mouseover(function(){a.rating.event.drain(c,this,b);a.rating.event.fill(c,this,b,"hover")}).mouseout(function(){a.rating.event.drain(c,
this,b);a.rating.event.reset(c,this,b)}).click(function(){a.rating.event.click(c,this,b)});if(this.checked)a.rating.groups[c].current=eStar;a(this).remove();d+1==this.length&&a.rating.event.reset(c,this,b)});for(n in a.rating.groups)(function(d,b,c){if(d){a.rating.event.fill(c,d,e||{},"on");a(b).val(a(d).children("a").text())}})(a.rating.groups[n].current,a.rating.groups[n].valueElem,n);return this}}(jQuery);
